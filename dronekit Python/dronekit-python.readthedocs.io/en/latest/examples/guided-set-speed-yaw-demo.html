<!DOCTYPE html>
<html lang="en" class="no-js">

<!-- Mirrored from dronekit-python.readthedocs.io/en/latest/examples/guided-set-speed-yaw-demo.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 14:26:40 GMT -->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	
		<link rel="stylesheet" href="../../../../assets.readthedocs.org/static/css/badge_only.css" type="text/css" />
	
		<link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
	

	<link rel="stylesheet" href="../_static/css/style.css" />
	<script src="../_static/js/modernizr.js"></script>
	<link href='http://fonts.googleapis.com/css?family=PT+Serif:400,700' rel='stylesheet' type='text/css'>

	
		<title>Example: Guided Mode Movement and Commands (Copter)</title>
	

	<script type="text/javascript">
		var DOCUMENTATION_OPTIONS = {
			URL_ROOT: '',
			VERSION: '2.4.0',
			COLLAPSE_INDEX: false,
			FILE_SUFFIX: '.html',
			HAS_SOURCE: true
		};
	</script>


<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="guided-set-speed-yaw-demo.html" />

<link rel="stylesheet" href="../../../../assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "examples/guided-set-speed-yaw-demo"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="../../../../assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>
<body>
	<nav id="topnav" class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container-fluid">
			<div class="navbar-header">
				<button class="navbar-toggle collapsed icon-facebook-sign" type="button" data-toggle="collapse" data-target="#collapsable-topnav">
					<i class="fa fa-bars"></i>
				</button>
				<a class="navbar-brand" href="http://dronekit.io/">
					<img src="../_static/images/new-DK-logo-color.svg" alt="3DR">
				</a>
			</div>
			<div class="navbar-collapse collapse" id="collapsable-topnav">
				<ul class="nav navbar-nav navbar-right">
					<li>
						<a href="https://cloud.dronekit.io/" class="cloud">Cloud</a>
					</li>
					<li>
						<a href="http://python.dronekit.io/" class="air">Python</a>
					</li>
					<li>
						<a href="http://android.dronekit.io/" class="ground">Android</a>
					</li>
					<li>
						<a href="http://dronekit.io/support" class="support">Support</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<div class="container-fluid">
		<div class="row gray-bg">
			<div class="col-sm-3 col-md-2 col-sidebar">

        
					
	<div id="sidebar-search" role="search">
		<form id="rtd-search-form" class="form-inline" action="https://dronekit-python.readthedocs.io/en/latest/search.html" method="get">
			<div class="input-group">
				<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>
				<input class="form-control" type="text" name="q" placeholder="Search..." />
			</div>
			<input type="hidden" name="check_keywords" value="yes" />
			<input type="hidden" name="area" value="default" />
		</form>
	</div>
        
				<div id="gray-sidebar" class="container-fluid">
	        
	          
	          
	              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/overview.html">About DroneKit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about/overview.html#open-source-community">Open source community</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/overview.html#compatibility">Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/overview.html#api-features">API features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/overview.html#technical-support">Technical support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/release_notes.html">Release Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about/release_notes.html#latest-release">Latest release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/release_notes.html#changelog">Changelog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-9-1-2017-04-21">Version 2.9.1 (2017-04-21)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-9-0-2016-08-29">Version 2.9.0 (2016-08-29)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-8-0-2016-07-15">Version 2.8.0 (2016-07-15)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-7-0-2016-06-21">Version 2.7.0 (2016-06-21)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-6-0-2016-06-17">Version 2.6.0 (2016-06-17)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-5-0-2016-05-04">Version 2.5.0 (2016-05-04)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-4-0-2016-02-29">Version 2.4.0 (2016-02-29)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-3-0-2016-02-26">Version 2.3.0 (2016-02-26)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-2-0-2016-02-19">Version 2.2.0 (2016-02-19)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-1-0-2016-02-16">Version 2.1.0 (2016-02-16)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-0-2-2015-11-30">Version 2.0.2 (2015-11-30)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/release_notes.html#version-2-0-0-2015-11-23">Version 2.0.0 (2015-11-23)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../about/release_notes.html#all-releases">All releases</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/release_notes.html#working-with-releases">Working with releases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/migrating.html">Migrating to DKPY 2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about/migrating.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/migrating.html#launching-scripts">Launching scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/migrating.html#code-changes">Code changes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#connecting-to-a-vehicle">Connecting to a vehicle</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#connection-status-checks">Connection status checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#script-completion-checks">Script completion checks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#command-line-arguments">Command line arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#current-script-directory">Current script directory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#vehicle-location">Vehicle.location</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#takeoff-and-movement-commands">Takeoff and movement commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#home-location">Home location</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#missions-and-waypoints">Missions and Waypoints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#observing-attribute-changes">Observing attribute changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#parameter-changes">Parameter changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#intercepting-mavlink-messages">Intercepting MAVLink Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#new-attributes">New attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/migrating.html#channel-overrides">Channel Overrides</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../about/migrating.html#debugging">Debugging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/license.html">Open Source Licence</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/quick_start.html">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/quick_start.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/quick_start.html#basic-hello-drone">Basic “Hello Drone”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/quick_start.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../develop/index.html">Developing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../develop/installation.html">Installing DroneKit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../develop/companion-computers.html">Companion Computers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../develop/companion-computers.html#raspberrypi">RaspberryPi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/companion-computers.html#intel-edison">Intel Edison</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/companion-computers.html#beagleboneblack">BeagleBoneBlack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/companion-computers.html#odroid">Odroid</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../develop/sitl_setup.html">Simulated Vehicle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../develop/sitl_setup.html#dronekit-sitl">DroneKit-SITL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../develop/sitl_setup.html#installation">Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../develop/sitl_setup.html#running-sitl">Running SITL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../develop/sitl_setup.html#connecting-to-dronekit-sitl">Connecting to DroneKit-SITL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../develop/sitl_setup.html#dronekit-sitl-python-api">DroneKit-SITL Python API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../develop/sitl_setup.html#building-sitl-from-source">Building SITL from source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/sitl_setup.html#connecting-an-additional-ground-station">Connecting an additional Ground Station</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../develop/best_practice.html">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#general-considerations">General considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#connecting">Connecting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#launch-sequence">Launch sequence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#movement-commands">Movement commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#vehicle-information">Vehicle information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#missions-and-waypoints">Missions and waypoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#monitor-and-react-to-state-changes">Monitor and react to state changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#sleep-the-script-when-not-needed">Sleep the script when not needed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#exiting-a-script">Exiting a script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#subclass-vehicle">Subclass Vehicle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#debugging">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#launching-scripts">Launching scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../develop/best_practice.html#current-script-directory">Current script directory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../develop/coding_standards.html">Coding Standards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../guide/connecting_vehicle.html">Connecting to a Vehicle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/connecting_vehicle.html#get-started-connect-string">Connection string options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/connecting_vehicle.html#connecting-to-multiple-vehicles">Connecting to multiple vehicles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html">Vehicle State and Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#attributes">Attributes</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#getting-attributes">Getting attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#setting-attributes">Setting attributes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#observing-attribute-changes">Observing attribute changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#home-location">Home location</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#parameters">Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#getting-parameters">Getting parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#setting-parameters">Setting parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#listing-all-parameters">Listing all parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#observing-parameter-changes">Observing parameter changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/vehicle_state_and_parameters.html#known-issues">Known issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/taking_off.html">Taking Off</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guide/copter/guided_mode.html">Guiding and Controlling Copter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/copter/guided_mode.html#controlling-vehicle-movement">Controlling vehicle movement</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/copter/guided_mode.html#position-control">Position control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/copter/guided_mode.html#velocity-control">Velocity control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/copter/guided_mode.html#acceleration-and-force-control">Acceleration and force control</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-commands">Guided mode commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/copter/guided_mode.html#sending-messages-commands">Sending messages/commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/copter/guided_mode.html#supported-commands">Supported commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/copter/guided_mode.html#setting-the-yaw">Setting the Yaw</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/copter/guided_mode.html#setting-the-roi">Setting the ROI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/copter/guided_mode.html#command-acknowledgements-and-response-values">Command acknowledgements and response values</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/copter/guided_mode.html#frame-conversion-functions">Frame conversion functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/copter/guided_mode.html#other-information">Other information</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/auto_mode.html">Missions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/auto_mode.html#mission-command-overview">Mission Command Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/auto_mode.html#download-current-mission">Download current mission</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/auto_mode.html#clearing-current-mission">Clearing current mission</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/auto_mode.html#creating-adding-mission-commands">Creating/adding mission commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/auto_mode.html#modifying-missions">Modifying missions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/auto_mode.html#running-and-monitoring-missions">Running and monitoring missions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/auto_mode.html#handling-the-end-of-a-mission">Handling the end of a mission</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/auto_mode.html#useful-mission-functions">Useful Mission functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../guide/auto_mode.html#load-a-mission-from-a-file">Load a mission from a file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/auto_mode.html#save-a-mission-to-a-file">Save a mission to a file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../guide/auto_mode.html#get-distance-to-waypoint">Get distance to waypoint</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../guide/auto_mode.html#useful-links">Useful Links</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/debugging.html">Debugging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/debugging.html#pdb-the-python-debugger">pdb - The Python Debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/debugging.html#pudb-a-full-screen-console-based-python-debugger">pudb - A full-screen, console-based Python debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/debugging.html#print-log-statements">Print/log statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/debugging.html#other-ides-debuggers">Other IDEs/debuggers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../guide/mavlink_messages.html">MAVLink Messages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../guide/mavlink_messages.html#creating-a-message-listener">Creating a message listener</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/mavlink_messages.html#watching-all-messages">Watching all messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../guide/mavlink_messages.html#removing-an-observer">Removing an observer</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="running_examples.html">Running the Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="vehicle_state.html">Vehicle State</a><ul>
<li class="toctree-l3"><a class="reference internal" href="vehicle_state.html#running-the-example">Running the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="vehicle_state.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="vehicle_state.html#known-issues">Known issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="vehicle_state.html#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="simple_goto.html">Simple Goto</a><ul>
<li class="toctree-l3"><a class="reference internal" href="simple_goto.html#running-the-example">Running the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="simple_goto.html#how-does-it-work">How does it work?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="simple_goto.html#takeoff">Takeoff</a></li>
<li class="toctree-l4"><a class="reference internal" href="simple_goto.html#flying-to-a-point-simple-goto">Flying to a point - simple_goto</a></li>
<li class="toctree-l4"><a class="reference internal" href="simple_goto.html#rtl-return-to-launch">RTL - Return to launch</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simple_goto.html#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Guided Movement and Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-example">Running the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-does-it-work">How does it work?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#goto-convenience-function">goto() - convenience function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#send-ned-velocity">send_ned_velocity()</a></li>
<li class="toctree-l4"><a class="reference internal" href="#send-global-velocity">send_global_velocity()</a></li>
<li class="toctree-l4"><a class="reference internal" href="#goto-position-target-global-int">goto_position_target_global_int()</a></li>
<li class="toctree-l4"><a class="reference internal" href="#goto-position-target-local-ned">goto_position_target_local_ned()</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#testbed-settings">Testbed settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mission_basic.html">Basic Mission</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mission_basic.html#running-the-example">Running the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="mission_basic.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="mission_basic.html#known-issues">Known issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="mission_basic.html#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mission_import_export.html">Mission Import/Export</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mission_import_export.html#running-the-example">Running the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="mission_import_export.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="mission_import_export.html#known-issues">Known issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="mission_import_export.html#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="create_attribute.html">Create Attribute in App</a><ul>
<li class="toctree-l3"><a class="reference internal" href="create_attribute.html#running-the-example">Running the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_attribute.html#how-does-it-work">How does it work?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="create_attribute.html#subclassing-vehicle">Subclassing Vehicle</a></li>
<li class="toctree-l4"><a class="reference internal" href="create_attribute.html#using-the-vehicle-subclass">Using the Vehicle subclass</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="create_attribute.html#known-issues">Known issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="create_attribute.html#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="follow_me.html">Follow Me (Linux only)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="follow_me.html#running-the-example">Running the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="follow_me.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="follow_me.html#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="drone_delivery.html">Drone Delivery</a><ul>
<li class="toctree-l3"><a class="reference internal" href="drone_delivery.html#running-the-example">Running the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="drone_delivery.html#screenshots">Screenshots</a></li>
<li class="toctree-l3"><a class="reference internal" href="drone_delivery.html#how-it-works">How it works</a><ul>
<li class="toctree-l4"><a class="reference internal" href="drone_delivery.html#using-attribute-observers">Using attribute observers</a></li>
<li class="toctree-l4"><a class="reference internal" href="drone_delivery.html#starting-cherrypy-from-a-dronekit-application">Starting CherryPy from a DroneKit application</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="drone_delivery.html#known-issues">Known issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="drone_delivery.html#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="flight_replay.html">Flight Replay</a><ul>
<li class="toctree-l3"><a class="reference internal" href="flight_replay.html#running-the-example">Running the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight_replay.html#how-it-works">How it works</a><ul>
<li class="toctree-l4"><a class="reference internal" href="flight_replay.html#getting-the-points">Getting the points</a></li>
<li class="toctree-l4"><a class="reference internal" href="flight_replay.html#setting-the-new-waypoints">Setting the new waypoints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="flight_replay.html#known-issues">Known issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight_replay.html#source-code">Source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="channel_overrides.html">Channel Overrides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="channel_overrides.html#running-the-example">Running the example</a></li>
<li class="toctree-l3"><a class="reference internal" href="channel_overrides.html#how-does-it-work">How does it work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="channel_overrides.html#source-code">Source code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/getting_started.html">How you can Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/contributions_api.html">Contributing to the API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contributing/contributions_api.html#submitting-changes">Submitting changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/contributions_api.html#test-code">Test code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../contributing/contributions_api.html#setting-up-local-testing">Setting up local testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contributing/contributions_api.html#unit-tests">Unit tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contributing/contributions_api.html#integration-tests">Integration tests</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/contributions_documentation.html">Contributing to the Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contributing/contributions_documentation.html#documentation-system-overview">Documentation system overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/contributions_documentation.html#submitting-changes">Submitting changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/contributions_documentation.html#building-the-docs">Building the docs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/contributions_documentation.html#style-guide">Style guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/developer_setup_windows.html">Building DroneKit-Python on Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developer_setup_windows.html#install-dronekit-using-winpython-command-line">Install DroneKit using WinPython command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developer_setup_windows.html#fetch-and-build-dronekit-source">Fetch and build DroneKit source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developer_setup_windows.html#updating-dronekit">Updating DroneKit</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/developer_setup_linux.html">Building DroneKit-Python on Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developer_setup_linux.html#fetch-and-build-dronekit-source">Fetch and build DroneKit source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing/developer_setup_linux.html#updating-dronekit">Updating DroneKit</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../automodule.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference external" href="http://python.dronekit.io/genindex.html">Index</a></li>
</ul>
</li>
</ul>

	          
	        
				</div>
			</div>
			<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
				<div id="api-content">
					
  <div class="section" id="example-guided-mode-movement-and-commands-copter">
<span id="example-guided-mode-setting-speed-yaw"></span><h1>Example: Guided Mode Movement and Commands (Copter)<a class="headerlink" href="#example-guided-mode-movement-and-commands-copter" title="Permalink to this headline">¶</a></h1>
<p>This example shows how to control Copter movement and send immediate commands in <a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter"><span class="std std-ref">GUIDED mode</span></a>.
It demonstrates three methods for explicitly specifying a target position and two commands for controlling movement by
setting the vehicle’s velocity vectors. It also shows how to send commands to control the yaw (direction that the front
of the vehicle is pointing), region of interest, speed and home location, along with some useful functions for
converting between frames of reference.</p>
<p>The example is <a class="reference internal" href="#guided-example-source-code"><span class="std std-ref">documented in the source code</span></a>.
More detailed information about using GUIDED mode can be found in the guide: <a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter"><span class="std std-ref">Guiding and Controlling Copter</span></a>.</p>
<div class="figure" id="id6">
<a class="reference internal image-reference" href="../_images/GuidedModeExample_FlyByPosition.png"><img alt="Setting destination using position and changing speed and ROI" src="../_images/GuidedModeExample_FlyByPosition.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Setting destination using position and changing speed and ROI</span></p>
</div>
<div class="figure" id="id7">
<a class="reference internal image-reference" href="../_images/GuidedModeExample_FlyByVelocity.png"><img alt="Setting destination using velocity and changing yaw and home location" src="../_images/GuidedModeExample_FlyByVelocity.png" style="width: 50%;" /></a>
<p class="caption"><span class="caption-text">Setting destination using velocity and changing yaw and home location</span></p>
</div>
<div class="section" id="running-the-example">
<h2>Running the example<a class="headerlink" href="#running-the-example" title="Permalink to this headline">¶</a></h2>
<p>The example can be run as described in <a class="reference internal" href="running_examples.html"><span class="doc">Running the Examples</span></a> (which in turn assumes that the vehicle
and DroneKit have been set up as described in <a class="reference internal" href="../develop/installation.html#installing-dronekit"><span class="std std-ref">Installing DroneKit</span></a>).</p>
<p>In summary, after cloning the repository:</p>
<ol class="arabic">
<li><p class="first">Navigate to the example folder as shown:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> dronekit-python/examples/guided_set_speed_yaw/
</pre></div>
</div>
</li>
<li><p class="first">You can run the example against a simulator (DroneKit-SITL) by specifying the Python script without any arguments.
The example will download SITL binaries if needed, start the simulator, and then connect to it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python guided_set_speed_yaw.py
</pre></div>
</div>
<p>On the command prompt you should see (something like):</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span>Starting copter simulator (SITL)
SITL already Downloaded.
Connecting to vehicle on: tcp:127.0.0.1:5760
&gt;&gt;&gt; APM:Copter V3.3 (d6053245)
&gt;&gt;&gt; Frame: QUAD
&gt;&gt;&gt; Calibrating barometer
&gt;&gt;&gt; Initialising APM...
&gt;&gt;&gt; barometer calibration complete
&gt;&gt;&gt; GROUND START
Basic pre-arm checks
 Waiting for vehicle to initialise...
 ...
 Waiting for vehicle to initialise...
Arming motors
 Waiting for arming...
 ...
 Waiting for arming...
&gt;&gt;&gt; ARMING MOTORS
&gt;&gt;&gt; GROUND START
 Waiting for arming...
&gt;&gt;&gt; Link timeout, no heartbeat in last 5 seconds
&gt;&gt;&gt; ...link restored.
&gt;&gt;&gt; Initialising APM...
Taking off!
 Altitude:  0.0
 Altitude:  0.28
 ...
 Altitude:  4.76
Reached target altitude
TRIANGLE path using standard Vehicle.simple_goto()
Set groundspeed to 5m/s.
Position North 80 West 50
Distance to target:  100.792763565
Distance to target:  99.912599325
...
Distance to target:  1.21731863826
Distance to target:  0.846001925791
Reached target
Position North 0 East 100
Distance to target:  122.623210813
...
Distance to target:  4.75876224557
Distance to target:  0.244650555031
Reached target
Position North -80 West 50
Distance to target:  100.792430814
Distance to target:  100.592652053
...
Distance to target:  2.48849019535
Distance to target:  0.73822537077
Reached target
TRIANGLE path using standard SET_POSITION_TARGET_GLOBAL_INT message and with varying speed.
Position South 100 West 130
Set groundspeed to 5m/s.
Distance to target:  188.180927131
Distance to target:  186.578341133
...
Distance to target:  9.87090024758
Distance to target:  1.4668164732
Reached target
Set groundspeed to 15m/s (max).
Position South 0 East 200
Distance to target:  318.826732298
Distance to target:  320.787965033
...
Distance to target:  11.5626483964
Distance to target:  0.335164775811
Reached target
Set airspeed to 10m/s (max).
Position North 100 West 130
Distance to target:  188.182420209
Distance to target:  189.860730713
...
Distance to target:  10.4263414971
Distance to target:  1.29857175712
Reached target
SQUARE path using SET_POSITION_TARGET_LOCAL_NED and position parameters
North 50m, East 0m, 10m altitude for 20 seconds
Point ROI at current location (home position)
North 50m, East 50m, 10m altitude
Point ROI at current location
North 0m, East 50m, 10m altitude
North 0m, East 0m, 10m altitude
SQUARE path using SET_POSITION_TARGET_LOCAL_NED and velocity parameters
Yaw 180 absolute (South)
Velocity South &amp; up
Yaw 270 absolute (West)
Velocity West &amp; down
Yaw 0 absolute (North)
Velocity North
Yaw 90 absolute (East)
Velocity East
DIAMOND path using SET_POSITION_TARGET_GLOBAL_INT and velocity parameters
Yaw 225 absolute
Velocity South, West and Up
Yaw 90 relative (to previous yaw heading)
Velocity North, West and Down
Set new home location to current location
Get new home location
 Home Location: LocationGlobal:lat=-35.363243103,lon=149.164337158,alt=593.890014648
Yaw 90 relative (to previous yaw heading)
Velocity North and East
Yaw 90 relative (to previous yaw heading)
Velocity South and East
Setting LAND mode...
Close vehicle object
Completed
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">It is more interesting to watch the example run on a map than the console. The topic <a class="reference internal" href="../develop/sitl_setup.html#viewing-uav-on-map"><span class="std std-ref">Connecting an additional Ground Station</span></a>
explains how to set up <em>Mission Planner</em> to view a vehicle running on the simulator (SITL).</p>
</div>
</li>
<li><p class="first">You can run the example against a specific connection (simulated or otherwise) by passing the <a class="reference internal" href="../guide/connecting_vehicle.html#get-started-connect-string"><span class="std std-ref">connection string</span></a> for your vehicle in the <code class="docutils literal notranslate"><span class="pre">--connect</span></code> parameter.</p>
<p>For example, to connect to SITL running on UDP port 14550 on your local computer:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python guided_set_speed_yaw.py --connect <span class="m">127</span>.0.0.1:14550
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="how-does-it-work">
<h2>How does it work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">¶</a></h2>
<p>The example is <a class="reference internal" href="#guided-example-source-code"><span class="std std-ref">documented in source code</span></a>. Additional information on the methods is provided either below or <a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter"><span class="std std-ref">in the guide</span></a>.</p>
<p>The functions for controlling vehicle movement are:</p>
<ul class="simple">
<li><a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter-position-control"><span class="std std-ref">Vehicle.simple_goto()</span></a> is the standard
DroneKit position controller method. It is called from <a class="reference internal" href="#example-guided-mode-goto-convenience"><span class="std std-ref">goto</span></a> to fly a triangular path.</li>
<li><a class="reference internal" href="#example-guided-mode-goto-position-target-global-int"><span class="std std-ref">goto_position_target_global_int()</span></a>
is a position controller that uses the
<a class="reference external" href="https://pixhawk.ethz.ch/mavlink/#SET_POSITION_TARGET_GLOBAL_INT">SET_POSITION_TARGET_GLOBAL_INT</a> command.</li>
<li><a class="reference internal" href="#example-guided-mode-goto-position-target-local-ned"><span class="std std-ref">goto_position_target_local_ned()</span></a>
is a position controller that uses <a class="reference external" href="https://pixhawk.ethz.ch/mavlink/#SET_POSITION_TARGET_LOCAL_NED">SET_POSITION_TARGET_LOCAL_NED</a>
command (taking values in NED frame, relative to the home position). This is used to fly a square path.
The script is put to sleep for a certain time in order to allow the vehicle to reach the specified position.</li>
<li><a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter-velocity-control"><span class="std std-ref">send_ned_velocity()</span></a> is a velocity controller.
It uses <a class="reference external" href="https://pixhawk.ethz.ch/mavlink/#SET_POSITION_TARGET_LOCAL_NED">SET_POSITION_TARGET_LOCAL_NED</a>
to fly a square path using velocity vectors to define the speed in each direction.</li>
<li><a class="reference internal" href="#example-guided-mode-send-global-velocity"><span class="std std-ref">send_global_velocity()</span></a> is a velocity controller.
It uses <a class="reference external" href="https://pixhawk.ethz.ch/mavlink/#SET_POSITION_TARGET_GLOBAL_INT">SET_POSITION_TARGET_GLOBAL_INT</a>
to fly a diamond-shaped path. The behaviour is essentially the same as for <code class="docutils literal notranslate"><span class="pre">send_ned_velocity()</span></code>
because the velocity components in both commands are in the NED frame.</li>
<li><a class="reference internal" href="#example-guided-mode-goto-convenience"><span class="std std-ref">goto</span></a> is a convenience function for specifying a target location
in metres from the current location and reporting the result.</li>
</ul>
<p>The functions sending immediate commands are:</p>
<ul class="simple">
<li><a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter-set-yaw"><span class="std std-ref">condition_yaw()</span></a></li>
<li><a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter-set-roi"><span class="std std-ref">set_roi(location)</span></a></li>
</ul>
<p>The example uses a number functions to convert global locations co-ordinates (decimal degrees) into local
coordinates relative to the vehicle (in metres). These are <a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter-useful-conversion-functions"><span class="std std-ref">described in the guide</span></a>.</p>
<div class="section" id="goto-convenience-function">
<span id="example-guided-mode-goto-convenience"></span><h3>goto() - convenience function<a class="headerlink" href="#goto-convenience-function" title="Permalink to this headline">¶</a></h3>
<p>This is a convenience function for setting position targets in metres North and East of the current location.
It reports the distance to the target every two seconds and completes when the target is reached.</p>
<p>This takes a function argument of either <a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter-position-control"><span class="std std-ref">Vehicle.simple_goto()</span></a> or
<a class="reference internal" href="#example-guided-mode-goto-position-target-global-int"><span class="std std-ref">goto_position_target_global_int()</span></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">goto</span><span class="p">(</span><span class="n">dNorth</span><span class="p">,</span> <span class="n">dEast</span><span class="p">,</span> <span class="n">gotoFunction</span><span class="o">=</span><span class="n">vehicle</span><span class="o">.</span><span class="n">simple_goto</span><span class="p">):</span>
    <span class="n">currentLocation</span><span class="o">=</span><span class="n">vehicle</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">global_relative_frame</span>
    <span class="n">targetLocation</span><span class="o">=</span><span class="n">get_location_metres</span><span class="p">(</span><span class="n">currentLocation</span><span class="p">,</span> <span class="n">dNorth</span><span class="p">,</span> <span class="n">dEast</span><span class="p">)</span>
    <span class="n">targetDistance</span><span class="o">=</span><span class="n">get_distance_metres</span><span class="p">(</span><span class="n">currentLocation</span><span class="p">,</span> <span class="n">targetLocation</span><span class="p">)</span>
    <span class="n">gotoFunction</span><span class="p">(</span><span class="n">targetLocation</span><span class="p">)</span>

    <span class="k">while</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;GUIDED&quot;</span><span class="p">:</span> <span class="c1">#Stop action if we are no longer in guided mode.</span>
        <span class="n">remainingDistance</span><span class="o">=</span><span class="n">get_distance_metres</span><span class="p">(</span><span class="n">vehicle</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">global_frame</span><span class="p">,</span> <span class="n">targetLocation</span><span class="p">)</span>
        <span class="k">print</span> <span class="s2">&quot;Distance to target: &quot;</span><span class="p">,</span> <span class="n">remainingDistance</span>
        <span class="k">if</span> <span class="n">remainingDistance</span><span class="o">&lt;=</span><span class="n">targetDistance</span><span class="o">*</span><span class="mf">0.01</span><span class="p">:</span> <span class="c1">#Just below target, in case of undershoot.</span>
            <span class="k">print</span> <span class="s2">&quot;Reached target&quot;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="send-ned-velocity">
<span id="example-guided-mode-send-ned-velocity"></span><h3>send_ned_velocity()<a class="headerlink" href="#send-ned-velocity" title="Permalink to this headline">¶</a></h3>
<p>The function <code class="docutils literal notranslate"><span class="pre">send_ned_velocity()</span></code> generates a <code class="docutils literal notranslate"><span class="pre">SET_POSITION_TARGET_LOCAL_NED</span></code> MAVLink message
which is used to directly specify the speed components of the vehicle.</p>
<p>The message is resent at 1Hz for a set duration.</p>
<p>This is documented in <a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter-velocity-control"><span class="std std-ref">the guide here</span></a>.</p>
</div>
<div class="section" id="send-global-velocity">
<span id="example-guided-mode-send-global-velocity"></span><h3>send_global_velocity()<a class="headerlink" href="#send-global-velocity" title="Permalink to this headline">¶</a></h3>
<p>The function <code class="docutils literal notranslate"><span class="pre">send_global_velocity()</span></code> generates a
<a class="reference external" href="https://pixhawk.ethz.ch/mavlink/#SET_POSITION_TARGET_GLOBAL_INT">SET_POSITION_TARGET_GLOBAL_INT</a>
MAVLink message which is used to directly specify the speed components of the vehicle in the NED
frame.</p>
<p>The function behaviour is otherwise exactly the same as when using
<a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter-velocity-control"><span class="std std-ref">SET_POSITION_TARGET_LOCAL_NED</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">send_global_velocity</span><span class="p">(</span><span class="n">velocity_x</span><span class="p">,</span> <span class="n">velocity_y</span><span class="p">,</span> <span class="n">velocity_z</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Move vehicle in direction based on specified velocity vectors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">message_factory</span><span class="o">.</span><span class="n">set_position_target_global_int_encode</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span>       <span class="c1"># time_boot_ms (not used)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># target system, target component</span>
        <span class="n">mavutil</span><span class="o">.</span><span class="n">mavlink</span><span class="o">.</span><span class="n">MAV_FRAME_GLOBAL_RELATIVE_ALT_INT</span><span class="p">,</span> <span class="c1"># frame</span>
        <span class="mb">0b0000111111000111</span><span class="p">,</span> <span class="c1"># type_mask (only speeds enabled)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># lat_int - X Position in WGS84 frame in 1e7 * meters</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># lon_int - Y Position in WGS84 frame in 1e7 * meters</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># alt - Altitude in meters in AMSL altitude(not WGS84 if absolute or relative)</span>
        <span class="c1"># altitude above terrain if GLOBAL_TERRAIN_ALT_INT</span>
        <span class="n">velocity_x</span><span class="p">,</span> <span class="c1"># X velocity in NED frame in m/s</span>
        <span class="n">velocity_y</span><span class="p">,</span> <span class="c1"># Y velocity in NED frame in m/s</span>
        <span class="n">velocity_z</span><span class="p">,</span> <span class="c1"># Z velocity in NED frame in m/s</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># afx, afy, afz acceleration (not supported yet, ignored in GCS_Mavlink)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># yaw, yaw_rate (not supported yet, ignored in GCS_Mavlink)</span>

    <span class="c1"># send command to vehicle on 1 Hz cycle</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">duration</span><span class="p">):</span>
        <span class="n">vehicle</span><span class="o">.</span><span class="n">send_mavlink</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The message is re-sent every second for the specified duration. From Copter 3.3 the vehicle will stop
moving if a new message is not received in approximately 3 seconds. Prior to Copter 3.3 the message only
needs to be sent once, and the velocity remains active until the next movement message is received.
The above code works for both cases!</p>
</div>
</div>
<div class="section" id="goto-position-target-global-int">
<span id="example-guided-mode-goto-position-target-global-int"></span><h3>goto_position_target_global_int()<a class="headerlink" href="#goto-position-target-global-int" title="Permalink to this headline">¶</a></h3>
<p>The function <code class="docutils literal notranslate"><span class="pre">goto_position_target_global_int()</span></code> generates a
<a class="reference external" href="http://dev.ardupilot.com/wiki/copter-commands-in-guided-mode/#set_position_target_global_int">SET_POSITION_TARGET_GLOBAL_INT</a>
MAVLink message which is used to directly specify the target location of the vehicle.
When used with <code class="docutils literal notranslate"><span class="pre">MAV_FRAME_GLOBAL_RELATIVE_ALT_INT</span></code> as shown below,
this method is effectively the same as <a class="reference internal" href="../guide/copter/guided_mode.html#guided-mode-copter-position-control"><span class="std std-ref">Vehicle.simple_goto</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">goto_position_target_global_int</span><span class="p">(</span><span class="n">aLocation</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send SET_POSITION_TARGET_GLOBAL_INT command to request the vehicle fly to a specified location.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">message_factory</span><span class="o">.</span><span class="n">set_position_target_global_int_encode</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span>       <span class="c1"># time_boot_ms (not used)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># target system, target component</span>
        <span class="n">mavutil</span><span class="o">.</span><span class="n">mavlink</span><span class="o">.</span><span class="n">MAV_FRAME_GLOBAL_RELATIVE_ALT_INT</span><span class="p">,</span> <span class="c1"># frame</span>
        <span class="mb">0b0000111111111000</span><span class="p">,</span> <span class="c1"># type_mask (only speeds enabled)</span>
        <span class="n">aLocation</span><span class="o">.</span><span class="n">lat</span><span class="o">*</span><span class="mf">1e7</span><span class="p">,</span> <span class="c1"># lat_int - X Position in WGS84 frame in 1e7 * meters</span>
        <span class="n">aLocation</span><span class="o">.</span><span class="n">lon</span><span class="o">*</span><span class="mf">1e7</span><span class="p">,</span> <span class="c1"># lon_int - Y Position in WGS84 frame in 1e7 * meters</span>
        <span class="n">aLocation</span><span class="o">.</span><span class="n">alt</span><span class="p">,</span> <span class="c1"># alt - Altitude in meters in AMSL altitude, not WGS84 if absolute or relative, above terrain if GLOBAL_TERRAIN_ALT_INT</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># X velocity in NED frame in m/s</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># Y velocity in NED frame in m/s</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># Z velocity in NED frame in m/s</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># afx, afy, afz acceleration (not supported yet, ignored in GCS_Mavlink)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># yaw, yaw_rate (not supported yet, ignored in GCS_Mavlink)</span>

    <span class="c1"># send command to vehicle</span>
    <span class="n">vehicle</span><span class="o">.</span><span class="n">send_mavlink</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>In the example code this function is called from the <a class="reference internal" href="#example-guided-mode-goto-convenience"><span class="std std-ref">goto()</span></a> convenience function.</p>
</div>
<div class="section" id="goto-position-target-local-ned">
<span id="example-guided-mode-goto-position-target-local-ned"></span><h3>goto_position_target_local_ned()<a class="headerlink" href="#goto-position-target-local-ned" title="Permalink to this headline">¶</a></h3>
<p>The function <code class="docutils literal notranslate"><span class="pre">goto_position_target_local_ned()</span></code> generates a
<a class="reference external" href="http://dev.ardupilot.com/wiki/copter-commands-in-guided-mode/#set_position_target_local_ned">SET_POSITION_TARGET_LOCAL_NED</a>
MAVLink message which is used to directly specify the target location in the North, East, Down frame.
The <code class="docutils literal notranslate"><span class="pre">type_mask</span></code> enables the position parameters (the last three bits of of the mask are zero).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In the NED frame positive altitudes are entered as negative “Down” values.
So if down is “10”, this will be 10 metres below the home altitude.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference external" href="https://pixhawk.ethz.ch/mavlink/#SET_POSITION_TARGET_LOCAL_NED">MAVLink protocol documentation</a>
lists a number of possible frames of reference. Up until Copter 3.2.1 the actual frame used is always
relative to the home location (as indicated by MAV_FRAME_LOCAL_NED). Starting from Copter 3.3
you can specify <a class="reference external" href="http://dev.ardupilot.com/wiki/copter-commands-in-guided-mode/#set_position_target_local_ned">other frames</a>,
for example to move the vehicle relative to its current position.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">goto_position_target_local_ned</span><span class="p">(</span><span class="n">north</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">down</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send SET_POSITION_TARGET_LOCAL_NED command to request the vehicle fly to a specified</span>
<span class="sd">    location in the North, East, Down frame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">message_factory</span><span class="o">.</span><span class="n">set_position_target_local_ned_encode</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span>       <span class="c1"># time_boot_ms (not used)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># target system, target component</span>
        <span class="n">mavutil</span><span class="o">.</span><span class="n">mavlink</span><span class="o">.</span><span class="n">MAV_FRAME_LOCAL_NED</span><span class="p">,</span> <span class="c1"># frame</span>
        <span class="mb">0b0000111111111000</span><span class="p">,</span> <span class="c1"># type_mask (only positions enabled)</span>
        <span class="n">north</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">down</span><span class="p">,</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># x, y, z velocity in m/s  (not used)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># x, y, z acceleration (not supported yet, ignored in GCS_Mavlink)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># yaw, yaw_rate (not supported yet, ignored in GCS_Mavlink)</span>
    <span class="c1"># send command to vehicle</span>
    <span class="n">vehicle</span><span class="o">.</span><span class="n">send_mavlink</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>At time of writing, acceleration and yaw bits are ignored.</p>
</div>
</div>
<div class="section" id="testbed-settings">
<h2>Testbed settings<a class="headerlink" href="#testbed-settings" title="Permalink to this headline">¶</a></h2>
<p>This example has been tested on Windows against SITL running both natively and in a virtual machine (as described in <a class="reference internal" href="../develop/installation.html#installing-dronekit"><span class="std std-ref">Installing DroneKit</span></a>).</p>
<ul class="simple">
<li>DroneKit version: 2.0.2</li>
<li>ArduPilot version: 3.3</li>
</ul>
</div>
<div class="section" id="source-code">
<span id="guided-example-source-code"></span><h2>Source code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h2>
<p>The full source code at documentation build-time is listed below
(<a class="reference external" href="https://github.com/dronekit/dronekit-python/blob/master/examples/guided_set_speed_yaw/guided_set_speed_yaw.py">current version on Github</a>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">© Copyright 2015-2016, 3D Robotics.</span>
<span class="sd">guided_set_speed_yaw.py: (Copter Only)</span>

<span class="sd">This example shows how to move/direct Copter and send commands in GUIDED mode using DroneKit Python.</span>

<span class="sd">Example documentation: http://python.dronekit.io/examples/guided-set-speed-yaw-demo.html</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="kn">from</span> <span class="nn">dronekit</span> <span class="kn">import</span> <span class="n">connect</span><span class="p">,</span> <span class="n">VehicleMode</span><span class="p">,</span> <span class="n">LocationGlobal</span><span class="p">,</span> <span class="n">LocationGlobalRelative</span>
<span class="kn">from</span> <span class="nn">pymavlink</span> <span class="kn">import</span> <span class="n">mavutil</span> <span class="c1"># Needed for command message definitions</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">math</span>


<span class="c1">#Set up option parsing to get connection string</span>
<span class="kn">import</span> <span class="nn">argparse</span>  
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Control Copter and send commands in GUIDED mode &#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--connect&#39;</span><span class="p">,</span> 
                   <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Vehicle connection target string. If not specified, SITL automatically started and used.&quot;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="n">connection_string</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">connect</span>
<span class="n">sitl</span> <span class="o">=</span> <span class="bp">None</span>


<span class="c1">#Start SITL if no connection string specified</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">connection_string</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">dronekit_sitl</span>
    <span class="n">sitl</span> <span class="o">=</span> <span class="n">dronekit_sitl</span><span class="o">.</span><span class="n">start_default</span><span class="p">()</span>
    <span class="n">connection_string</span> <span class="o">=</span> <span class="n">sitl</span><span class="o">.</span><span class="n">connection_string</span><span class="p">()</span>


<span class="c1"># Connect to the Vehicle</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Connecting to vehicle on: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">connection_string</span><span class="p">)</span>
<span class="n">vehicle</span> <span class="o">=</span> <span class="n">connect</span><span class="p">(</span><span class="n">connection_string</span><span class="p">,</span> <span class="n">wait_ready</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">arm_and_takeoff</span><span class="p">(</span><span class="n">aTargetAltitude</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Arms vehicle and fly to aTargetAltitude.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Basic pre-arm checks&quot;</span><span class="p">)</span>
    <span class="c1"># Don&#39;t let the user try to arm until autopilot is ready</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">is_armable</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot; Waiting for vehicle to initialise...&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Arming motors&quot;</span><span class="p">)</span>
    <span class="c1"># Copter should arm in GUIDED mode</span>
    <span class="n">vehicle</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">VehicleMode</span><span class="p">(</span><span class="s2">&quot;GUIDED&quot;</span><span class="p">)</span>
    <span class="n">vehicle</span><span class="o">.</span><span class="n">armed</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">armed</span><span class="p">:</span>      
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot; Waiting for arming...&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Taking off!&quot;</span><span class="p">)</span>
    <span class="n">vehicle</span><span class="o">.</span><span class="n">simple_takeoff</span><span class="p">(</span><span class="n">aTargetAltitude</span><span class="p">)</span> <span class="c1"># Take off to target altitude</span>

    <span class="c1"># Wait until the vehicle reaches a safe height before processing the goto (otherwise the command </span>
    <span class="c1">#  after Vehicle.simple_takeoff will execute immediately).</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot; Altitude: &quot;</span><span class="p">,</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">global_relative_frame</span><span class="o">.</span><span class="n">alt</span><span class="p">)</span>      
        <span class="k">if</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">global_relative_frame</span><span class="o">.</span><span class="n">alt</span><span class="o">&gt;=</span><span class="n">aTargetAltitude</span><span class="o">*</span><span class="mf">0.95</span><span class="p">:</span> <span class="c1">#Trigger just below target alt.</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Reached target altitude&quot;</span><span class="p">)</span>
            <span class="k">break</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>


<span class="c1">#Arm and take of to altitude of 5 meters</span>
<span class="n">arm_and_takeoff</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>



<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Convenience functions for sending immediate/guided mode commands to control the Copter.</span>

<span class="sd">The set of commands demonstrated here include:</span>
<span class="sd">* MAV_CMD_CONDITION_YAW - set direction of the front of the Copter (latitude, longitude)</span>
<span class="sd">* MAV_CMD_DO_SET_ROI - set direction where the camera gimbal is aimed (latitude, longitude, altitude)</span>
<span class="sd">* MAV_CMD_DO_CHANGE_SPEED - set target speed in metres/second.</span>


<span class="sd">The full set of available commands are listed here:</span>
<span class="sd">http://dev.ardupilot.com/wiki/copter-commands-in-guided-mode/</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">condition_yaw</span><span class="p">(</span><span class="n">heading</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send MAV_CMD_CONDITION_YAW message to point vehicle at a specified heading (in degrees).</span>

<span class="sd">    This method sets an absolute heading by default, but you can set the `relative` parameter</span>
<span class="sd">    to `True` to set yaw relative to the current yaw heading.</span>

<span class="sd">    By default the yaw of the vehicle will follow the direction of travel. After setting </span>
<span class="sd">    the yaw using this function there is no way to return to the default yaw &quot;follow direction </span>
<span class="sd">    of travel&quot; behaviour (https://github.com/diydrones/ardupilot/issues/2427)</span>

<span class="sd">    For more information see: </span>
<span class="sd">    http://copter.ardupilot.com/wiki/common-mavlink-mission-command-messages-mav_cmd/#mav_cmd_condition_yaw</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">relative</span><span class="p">:</span>
        <span class="n">is_relative</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#yaw relative to direction of travel</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">is_relative</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#yaw is an absolute angle</span>
    <span class="c1"># create the CONDITION_YAW command using command_long_encode()</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">message_factory</span><span class="o">.</span><span class="n">command_long_encode</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># target system, target component</span>
        <span class="n">mavutil</span><span class="o">.</span><span class="n">mavlink</span><span class="o">.</span><span class="n">MAV_CMD_CONDITION_YAW</span><span class="p">,</span> <span class="c1">#command</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1">#confirmation</span>
        <span class="n">heading</span><span class="p">,</span>    <span class="c1"># param 1, yaw in degrees</span>
        <span class="mi">0</span><span class="p">,</span>          <span class="c1"># param 2, yaw speed deg/s</span>
        <span class="mi">1</span><span class="p">,</span>          <span class="c1"># param 3, direction -1 ccw, 1 cw</span>
        <span class="n">is_relative</span><span class="p">,</span> <span class="c1"># param 4, relative offset 1, absolute angle 0</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># param 5 ~ 7 not used</span>
    <span class="c1"># send command to vehicle</span>
    <span class="n">vehicle</span><span class="o">.</span><span class="n">send_mavlink</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_roi</span><span class="p">(</span><span class="n">location</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send MAV_CMD_DO_SET_ROI message to point camera gimbal at a </span>
<span class="sd">    specified region of interest (LocationGlobal).</span>
<span class="sd">    The vehicle may also turn to face the ROI.</span>

<span class="sd">    For more information see: </span>
<span class="sd">    http://copter.ardupilot.com/common-mavlink-mission-command-messages-mav_cmd/#mav_cmd_do_set_roi</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># create the MAV_CMD_DO_SET_ROI command</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">message_factory</span><span class="o">.</span><span class="n">command_long_encode</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># target system, target component</span>
        <span class="n">mavutil</span><span class="o">.</span><span class="n">mavlink</span><span class="o">.</span><span class="n">MAV_CMD_DO_SET_ROI</span><span class="p">,</span> <span class="c1">#command</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1">#confirmation</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">#params 1-4</span>
        <span class="n">location</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span>
        <span class="n">location</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span>
        <span class="n">location</span><span class="o">.</span><span class="n">alt</span>
        <span class="p">)</span>
    <span class="c1"># send command to vehicle</span>
    <span class="n">vehicle</span><span class="o">.</span><span class="n">send_mavlink</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>



<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Functions to make it easy to convert between the different frames-of-reference. In particular these</span>
<span class="sd">make it easy to navigate in terms of &quot;metres from the current position&quot; when using commands that take </span>
<span class="sd">absolute positions in decimal degrees.</span>

<span class="sd">The methods are approximations only, and may be less accurate over longer distances, and when close </span>
<span class="sd">to the Earth&#39;s poles.</span>

<span class="sd">Specifically, it provides:</span>
<span class="sd">* get_location_metres - Get LocationGlobal (decimal degrees) at distance (m) North &amp; East of a given LocationGlobal.</span>
<span class="sd">* get_distance_metres - Get the distance between two LocationGlobal objects in metres</span>
<span class="sd">* get_bearing - Get the bearing in degrees to a LocationGlobal</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">get_location_metres</span><span class="p">(</span><span class="n">original_location</span><span class="p">,</span> <span class="n">dNorth</span><span class="p">,</span> <span class="n">dEast</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a LocationGlobal object containing the latitude/longitude `dNorth` and `dEast` metres from the </span>
<span class="sd">    specified `original_location`. The returned LocationGlobal has the same `alt` value</span>
<span class="sd">    as `original_location`.</span>

<span class="sd">    The function is useful when you want to move the vehicle around specifying locations relative to </span>
<span class="sd">    the current vehicle position.</span>

<span class="sd">    The algorithm is relatively accurate over small distances (10m within 1km) except close to the poles.</span>

<span class="sd">    For more information see:</span>
<span class="sd">    http://gis.stackexchange.com/questions/2951/algorithm-for-offsetting-a-latitude-longitude-by-some-amount-of-meters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">earth_radius</span> <span class="o">=</span> <span class="mf">6378137.0</span> <span class="c1">#Radius of &quot;spherical&quot; earth</span>
    <span class="c1">#Coordinate offsets in radians</span>
    <span class="n">dLat</span> <span class="o">=</span> <span class="n">dNorth</span><span class="o">/</span><span class="n">earth_radius</span>
    <span class="n">dLon</span> <span class="o">=</span> <span class="n">dEast</span><span class="o">/</span><span class="p">(</span><span class="n">earth_radius</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">original_location</span><span class="o">.</span><span class="n">lat</span><span class="o">/</span><span class="mi">180</span><span class="p">))</span>

    <span class="c1">#New position in decimal degrees</span>
    <span class="n">newlat</span> <span class="o">=</span> <span class="n">original_location</span><span class="o">.</span><span class="n">lat</span> <span class="o">+</span> <span class="p">(</span><span class="n">dLat</span> <span class="o">*</span> <span class="mi">180</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
    <span class="n">newlon</span> <span class="o">=</span> <span class="n">original_location</span><span class="o">.</span><span class="n">lon</span> <span class="o">+</span> <span class="p">(</span><span class="n">dLon</span> <span class="o">*</span> <span class="mi">180</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">original_location</span><span class="p">)</span> <span class="ow">is</span> <span class="n">LocationGlobal</span><span class="p">:</span>
        <span class="n">targetlocation</span><span class="o">=</span><span class="n">LocationGlobal</span><span class="p">(</span><span class="n">newlat</span><span class="p">,</span> <span class="n">newlon</span><span class="p">,</span><span class="n">original_location</span><span class="o">.</span><span class="n">alt</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">original_location</span><span class="p">)</span> <span class="ow">is</span> <span class="n">LocationGlobalRelative</span><span class="p">:</span>
        <span class="n">targetlocation</span><span class="o">=</span><span class="n">LocationGlobalRelative</span><span class="p">(</span><span class="n">newlat</span><span class="p">,</span> <span class="n">newlon</span><span class="p">,</span><span class="n">original_location</span><span class="o">.</span><span class="n">alt</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid Location object passed&quot;</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">targetlocation</span><span class="p">;</span>


<span class="k">def</span> <span class="nf">get_distance_metres</span><span class="p">(</span><span class="n">aLocation1</span><span class="p">,</span> <span class="n">aLocation2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the ground distance in metres between two LocationGlobal objects.</span>

<span class="sd">    This method is an approximation, and will not be accurate over large distances and close to the </span>
<span class="sd">    earth&#39;s poles. It comes from the ArduPilot test code: </span>
<span class="sd">    https://github.com/diydrones/ardupilot/blob/master/Tools/autotest/common.py</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dlat</span> <span class="o">=</span> <span class="n">aLocation2</span><span class="o">.</span><span class="n">lat</span> <span class="o">-</span> <span class="n">aLocation1</span><span class="o">.</span><span class="n">lat</span>
    <span class="n">dlong</span> <span class="o">=</span> <span class="n">aLocation2</span><span class="o">.</span><span class="n">lon</span> <span class="o">-</span> <span class="n">aLocation1</span><span class="o">.</span><span class="n">lon</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">dlat</span><span class="o">*</span><span class="n">dlat</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">dlong</span><span class="o">*</span><span class="n">dlong</span><span class="p">))</span> <span class="o">*</span> <span class="mf">1.113195e5</span>


<span class="k">def</span> <span class="nf">get_bearing</span><span class="p">(</span><span class="n">aLocation1</span><span class="p">,</span> <span class="n">aLocation2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the bearing between the two LocationGlobal objects passed as parameters.</span>

<span class="sd">    This method is an approximation, and may not be accurate over large distances and close to the </span>
<span class="sd">    earth&#39;s poles. It comes from the ArduPilot test code: </span>
<span class="sd">    https://github.com/diydrones/ardupilot/blob/master/Tools/autotest/common.py</span>
<span class="sd">    &quot;&quot;&quot;</span>	
    <span class="n">off_x</span> <span class="o">=</span> <span class="n">aLocation2</span><span class="o">.</span><span class="n">lon</span> <span class="o">-</span> <span class="n">aLocation1</span><span class="o">.</span><span class="n">lon</span>
    <span class="n">off_y</span> <span class="o">=</span> <span class="n">aLocation2</span><span class="o">.</span><span class="n">lat</span> <span class="o">-</span> <span class="n">aLocation1</span><span class="o">.</span><span class="n">lat</span>
    <span class="n">bearing</span> <span class="o">=</span> <span class="mf">90.00</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="o">-</span><span class="n">off_y</span><span class="p">,</span> <span class="n">off_x</span><span class="p">)</span> <span class="o">*</span> <span class="mf">57.2957795</span>
    <span class="k">if</span> <span class="n">bearing</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">bearing</span> <span class="o">+=</span> <span class="mf">360.00</span>
    <span class="k">return</span> <span class="n">bearing</span><span class="p">;</span>



<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Functions to move the vehicle to a specified position (as opposed to controlling movement by setting velocity components).</span>

<span class="sd">The methods include:</span>
<span class="sd">* goto_position_target_global_int - Sets position using SET_POSITION_TARGET_GLOBAL_INT command in </span>
<span class="sd">    MAV_FRAME_GLOBAL_RELATIVE_ALT_INT frame</span>
<span class="sd">* goto_position_target_local_ned - Sets position using SET_POSITION_TARGET_LOCAL_NED command in </span>
<span class="sd">    MAV_FRAME_BODY_NED frame</span>
<span class="sd">* goto - A convenience function that can use Vehicle.simple_goto (default) or </span>
<span class="sd">    goto_position_target_global_int to travel to a specific position in metres </span>
<span class="sd">    North and East from the current location. </span>
<span class="sd">    This method reports distance to the destination.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">goto_position_target_global_int</span><span class="p">(</span><span class="n">aLocation</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send SET_POSITION_TARGET_GLOBAL_INT command to request the vehicle fly to a specified LocationGlobal.</span>

<span class="sd">    For more information see: https://pixhawk.ethz.ch/mavlink/#SET_POSITION_TARGET_GLOBAL_INT</span>

<span class="sd">    See the above link for information on the type_mask (0=enable, 1=ignore). </span>
<span class="sd">    At time of writing, acceleration and yaw bits are ignored.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">message_factory</span><span class="o">.</span><span class="n">set_position_target_global_int_encode</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span>       <span class="c1"># time_boot_ms (not used)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># target system, target component</span>
        <span class="n">mavutil</span><span class="o">.</span><span class="n">mavlink</span><span class="o">.</span><span class="n">MAV_FRAME_GLOBAL_RELATIVE_ALT_INT</span><span class="p">,</span> <span class="c1"># frame</span>
        <span class="mb">0b0000111111111000</span><span class="p">,</span> <span class="c1"># type_mask (only speeds enabled)</span>
        <span class="n">aLocation</span><span class="o">.</span><span class="n">lat</span><span class="o">*</span><span class="mf">1e7</span><span class="p">,</span> <span class="c1"># lat_int - X Position in WGS84 frame in 1e7 * meters</span>
        <span class="n">aLocation</span><span class="o">.</span><span class="n">lon</span><span class="o">*</span><span class="mf">1e7</span><span class="p">,</span> <span class="c1"># lon_int - Y Position in WGS84 frame in 1e7 * meters</span>
        <span class="n">aLocation</span><span class="o">.</span><span class="n">alt</span><span class="p">,</span> <span class="c1"># alt - Altitude in meters in AMSL altitude, not WGS84 if absolute or relative, above terrain if GLOBAL_TERRAIN_ALT_INT</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># X velocity in NED frame in m/s</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># Y velocity in NED frame in m/s</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># Z velocity in NED frame in m/s</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># afx, afy, afz acceleration (not supported yet, ignored in GCS_Mavlink)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># yaw, yaw_rate (not supported yet, ignored in GCS_Mavlink) </span>
    <span class="c1"># send command to vehicle</span>
    <span class="n">vehicle</span><span class="o">.</span><span class="n">send_mavlink</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">goto_position_target_local_ned</span><span class="p">(</span><span class="n">north</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">down</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;	</span>
<span class="sd">    Send SET_POSITION_TARGET_LOCAL_NED command to request the vehicle fly to a specified </span>
<span class="sd">    location in the North, East, Down frame.</span>

<span class="sd">    It is important to remember that in this frame, positive altitudes are entered as negative </span>
<span class="sd">    &quot;Down&quot; values. So if down is &quot;10&quot;, this will be 10 metres below the home altitude.</span>

<span class="sd">    Starting from AC3.3 the method respects the frame setting. Prior to that the frame was</span>
<span class="sd">    ignored. For more information see: </span>
<span class="sd">    http://dev.ardupilot.com/wiki/copter-commands-in-guided-mode/#set_position_target_local_ned</span>

<span class="sd">    See the above link for information on the type_mask (0=enable, 1=ignore). </span>
<span class="sd">    At time of writing, acceleration and yaw bits are ignored.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">message_factory</span><span class="o">.</span><span class="n">set_position_target_local_ned_encode</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span>       <span class="c1"># time_boot_ms (not used)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># target system, target component</span>
        <span class="n">mavutil</span><span class="o">.</span><span class="n">mavlink</span><span class="o">.</span><span class="n">MAV_FRAME_LOCAL_NED</span><span class="p">,</span> <span class="c1"># frame</span>
        <span class="mb">0b0000111111111000</span><span class="p">,</span> <span class="c1"># type_mask (only positions enabled)</span>
        <span class="n">north</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">down</span><span class="p">,</span> <span class="c1"># x, y, z positions (or North, East, Down in the MAV_FRAME_BODY_NED frame</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># x, y, z velocity in m/s  (not used)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># x, y, z acceleration (not supported yet, ignored in GCS_Mavlink)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># yaw, yaw_rate (not supported yet, ignored in GCS_Mavlink) </span>
    <span class="c1"># send command to vehicle</span>
    <span class="n">vehicle</span><span class="o">.</span><span class="n">send_mavlink</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">goto</span><span class="p">(</span><span class="n">dNorth</span><span class="p">,</span> <span class="n">dEast</span><span class="p">,</span> <span class="n">gotoFunction</span><span class="o">=</span><span class="n">vehicle</span><span class="o">.</span><span class="n">simple_goto</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Moves the vehicle to a position dNorth metres North and dEast metres East of the current position.</span>

<span class="sd">    The method takes a function pointer argument with a single `dronekit.lib.LocationGlobal` parameter for </span>
<span class="sd">    the target position. This allows it to be called with different position-setting commands. </span>
<span class="sd">    By default it uses the standard method: dronekit.lib.Vehicle.simple_goto().</span>

<span class="sd">    The method reports the distance to target every two seconds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">currentLocation</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">global_relative_frame</span>
    <span class="n">targetLocation</span> <span class="o">=</span> <span class="n">get_location_metres</span><span class="p">(</span><span class="n">currentLocation</span><span class="p">,</span> <span class="n">dNorth</span><span class="p">,</span> <span class="n">dEast</span><span class="p">)</span>
    <span class="n">targetDistance</span> <span class="o">=</span> <span class="n">get_distance_metres</span><span class="p">(</span><span class="n">currentLocation</span><span class="p">,</span> <span class="n">targetLocation</span><span class="p">)</span>
    <span class="n">gotoFunction</span><span class="p">(</span><span class="n">targetLocation</span><span class="p">)</span>
    
    <span class="c1">#print &quot;DEBUG: targetLocation: %s&quot; % targetLocation</span>
    <span class="c1">#print &quot;DEBUG: targetLocation: %s&quot; % targetDistance</span>

    <span class="k">while</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">mode</span><span class="o">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;GUIDED&quot;</span><span class="p">:</span> <span class="c1">#Stop action if we are no longer in guided mode.</span>
        <span class="c1">#print &quot;DEBUG: mode: %s&quot; % vehicle.mode.name</span>
        <span class="n">remainingDistance</span><span class="o">=</span><span class="n">get_distance_metres</span><span class="p">(</span><span class="n">vehicle</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">global_relative_frame</span><span class="p">,</span> <span class="n">targetLocation</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Distance to target: &quot;</span><span class="p">,</span> <span class="n">remainingDistance</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">remainingDistance</span><span class="o">&lt;=</span><span class="n">targetDistance</span><span class="o">*</span><span class="mf">0.01</span><span class="p">:</span> <span class="c1">#Just below target, in case of undershoot.</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Reached target&quot;</span><span class="p">)</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>



<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Functions that move the vehicle by specifying the velocity components in each direction.</span>
<span class="sd">The two functions use different MAVLink commands. The main difference is</span>
<span class="sd">that depending on the frame used, the NED velocity can be relative to the vehicle</span>
<span class="sd">orientation.</span>

<span class="sd">The methods include:</span>
<span class="sd">* send_ned_velocity - Sets velocity components using SET_POSITION_TARGET_LOCAL_NED command</span>
<span class="sd">* send_global_velocity - Sets velocity components using SET_POSITION_TARGET_GLOBAL_INT command</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">send_ned_velocity</span><span class="p">(</span><span class="n">velocity_x</span><span class="p">,</span> <span class="n">velocity_y</span><span class="p">,</span> <span class="n">velocity_z</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Move vehicle in direction based on specified velocity vectors and</span>
<span class="sd">    for the specified duration.</span>

<span class="sd">    This uses the SET_POSITION_TARGET_LOCAL_NED command with a type mask enabling only </span>
<span class="sd">    velocity components </span>
<span class="sd">    (http://dev.ardupilot.com/wiki/copter-commands-in-guided-mode/#set_position_target_local_ned).</span>
<span class="sd">    </span>
<span class="sd">    Note that from AC3.3 the message should be re-sent every second (after about 3 seconds</span>
<span class="sd">    with no message the velocity will drop back to zero). In AC3.2.1 and earlier the specified</span>
<span class="sd">    velocity persists until it is canceled. The code below should work on either version </span>
<span class="sd">    (sending the message multiple times does not cause problems).</span>
<span class="sd">    </span>
<span class="sd">    See the above link for information on the type_mask (0=enable, 1=ignore). </span>
<span class="sd">    At time of writing, acceleration and yaw bits are ignored.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">message_factory</span><span class="o">.</span><span class="n">set_position_target_local_ned_encode</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span>       <span class="c1"># time_boot_ms (not used)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># target system, target component</span>
        <span class="n">mavutil</span><span class="o">.</span><span class="n">mavlink</span><span class="o">.</span><span class="n">MAV_FRAME_LOCAL_NED</span><span class="p">,</span> <span class="c1"># frame</span>
        <span class="mb">0b0000111111000111</span><span class="p">,</span> <span class="c1"># type_mask (only speeds enabled)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># x, y, z positions (not used)</span>
        <span class="n">velocity_x</span><span class="p">,</span> <span class="n">velocity_y</span><span class="p">,</span> <span class="n">velocity_z</span><span class="p">,</span> <span class="c1"># x, y, z velocity in m/s</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># x, y, z acceleration (not supported yet, ignored in GCS_Mavlink)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># yaw, yaw_rate (not supported yet, ignored in GCS_Mavlink) </span>

    <span class="c1"># send command to vehicle on 1 Hz cycle</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">duration</span><span class="p">):</span>
        <span class="n">vehicle</span><span class="o">.</span><span class="n">send_mavlink</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    
    


<span class="k">def</span> <span class="nf">send_global_velocity</span><span class="p">(</span><span class="n">velocity_x</span><span class="p">,</span> <span class="n">velocity_y</span><span class="p">,</span> <span class="n">velocity_z</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Move vehicle in direction based on specified velocity vectors.</span>

<span class="sd">    This uses the SET_POSITION_TARGET_GLOBAL_INT command with type mask enabling only </span>
<span class="sd">    velocity components </span>
<span class="sd">    (http://dev.ardupilot.com/wiki/copter-commands-in-guided-mode/#set_position_target_global_int).</span>
<span class="sd">    </span>
<span class="sd">    Note that from AC3.3 the message should be re-sent every second (after about 3 seconds</span>
<span class="sd">    with no message the velocity will drop back to zero). In AC3.2.1 and earlier the specified</span>
<span class="sd">    velocity persists until it is canceled. The code below should work on either version </span>
<span class="sd">    (sending the message multiple times does not cause problems).</span>
<span class="sd">    </span>
<span class="sd">    See the above link for information on the type_mask (0=enable, 1=ignore). </span>
<span class="sd">    At time of writing, acceleration and yaw bits are ignored.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">message_factory</span><span class="o">.</span><span class="n">set_position_target_global_int_encode</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span>       <span class="c1"># time_boot_ms (not used)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># target system, target component</span>
        <span class="n">mavutil</span><span class="o">.</span><span class="n">mavlink</span><span class="o">.</span><span class="n">MAV_FRAME_GLOBAL_RELATIVE_ALT_INT</span><span class="p">,</span> <span class="c1"># frame</span>
        <span class="mb">0b0000111111000111</span><span class="p">,</span> <span class="c1"># type_mask (only speeds enabled)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># lat_int - X Position in WGS84 frame in 1e7 * meters</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># lon_int - Y Position in WGS84 frame in 1e7 * meters</span>
        <span class="mi">0</span><span class="p">,</span> <span class="c1"># alt - Altitude in meters in AMSL altitude(not WGS84 if absolute or relative)</span>
        <span class="c1"># altitude above terrain if GLOBAL_TERRAIN_ALT_INT</span>
        <span class="n">velocity_x</span><span class="p">,</span> <span class="c1"># X velocity in NED frame in m/s</span>
        <span class="n">velocity_y</span><span class="p">,</span> <span class="c1"># Y velocity in NED frame in m/s</span>
        <span class="n">velocity_z</span><span class="p">,</span> <span class="c1"># Z velocity in NED frame in m/s</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="c1"># afx, afy, afz acceleration (not supported yet, ignored in GCS_Mavlink)</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>    <span class="c1"># yaw, yaw_rate (not supported yet, ignored in GCS_Mavlink) </span>

    <span class="c1"># send command to vehicle on 1 Hz cycle</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">duration</span><span class="p">):</span>
        <span class="n">vehicle</span><span class="o">.</span><span class="n">send_mavlink</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>    


<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Fly a triangular path using the standard Vehicle.simple_goto() method.</span>

<span class="sd">The method is called indirectly via a custom &quot;goto&quot; that allows the target position to be</span>
<span class="sd">specified as a distance in metres (North/East) from the current position, and which reports</span>
<span class="sd">the distance-to-target.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;TRIANGLE path using standard Vehicle.simple_goto()&quot;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Set groundspeed to 5m/s.&quot;</span><span class="p">)</span>
<span class="n">vehicle</span><span class="o">.</span><span class="n">groundspeed</span><span class="o">=</span><span class="mi">5</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Position North 80 West 50&quot;</span><span class="p">)</span>
<span class="n">goto</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Position North 0 East 100&quot;</span><span class="p">)</span>
<span class="n">goto</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Position North -80 West 50&quot;</span><span class="p">)</span>
<span class="n">goto</span><span class="p">(</span><span class="o">-</span><span class="mi">80</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">)</span>




<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Fly a triangular path using the SET_POSITION_TARGET_GLOBAL_INT command and specifying</span>
<span class="sd">a target position (rather than controlling movement using velocity vectors). The command is</span>
<span class="sd">called from goto_position_target_global_int() (via `goto`).</span>

<span class="sd">The goto_position_target_global_int method is called indirectly from a custom &quot;goto&quot; that allows </span>
<span class="sd">the target position to be specified as a distance in metres (North/East) from the current position, </span>
<span class="sd">and which reports the distance-to-target.</span>

<span class="sd">The code also sets the speed (MAV_CMD_DO_CHANGE_SPEED). In AC3.2.1 Copter will accelerate to this speed </span>
<span class="sd">near the centre of its journey and then decelerate as it reaches the target. </span>
<span class="sd">In AC3.3 the speed changes immediately.</span>
<span class="sd">&quot;&quot;&quot;</span>	
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;TRIANGLE path using standard SET_POSITION_TARGET_GLOBAL_INT message and with varying speed.&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Position South 100 West 130&quot;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Set groundspeed to 5m/s.&quot;</span><span class="p">)</span>
<span class="n">vehicle</span><span class="o">.</span><span class="n">groundspeed</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">goto</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">130</span><span class="p">,</span> <span class="n">goto_position_target_global_int</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Set groundspeed to 15m/s (max).&quot;</span><span class="p">)</span>
<span class="n">vehicle</span><span class="o">.</span><span class="n">groundspeed</span> <span class="o">=</span> <span class="mi">15</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Position South 0 East 200&quot;</span><span class="p">)</span>
<span class="n">goto</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">260</span><span class="p">,</span> <span class="n">goto_position_target_global_int</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Set airspeed to 10m/s (max).&quot;</span><span class="p">)</span>
<span class="n">vehicle</span><span class="o">.</span><span class="n">airspeed</span> <span class="o">=</span> <span class="mi">10</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Position North 100 West 130&quot;</span><span class="p">)</span>
<span class="n">goto</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="o">-</span><span class="mi">130</span><span class="p">,</span> <span class="n">goto_position_target_global_int</span><span class="p">)</span>



<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Fly the vehicle in a 50m square path, using the SET_POSITION_TARGET_LOCAL_NED command </span>
<span class="sd">and specifying a target position (rather than controlling movement using velocity vectors). </span>
<span class="sd">The command is called from goto_position_target_local_ned() (via `goto`).</span>

<span class="sd">The position is specified in terms of the NED (North East Down) relative to the Home location.</span>

<span class="sd">WARNING: The &quot;D&quot; in NED means &quot;Down&quot;. Using a positive D value will drive the vehicle into the ground!</span>

<span class="sd">The code sleeps for a time (DURATION) to give the vehicle time to reach each position (rather than </span>
<span class="sd">sending commands based on proximity).</span>

<span class="sd">The code also sets the region of interest (MAV_CMD_DO_SET_ROI) via the `set_roi()` method. This points the </span>
<span class="sd">camera gimbal at the the selected location (in this case it aligns the whole vehicle to point at the ROI).</span>
<span class="sd">&quot;&quot;&quot;</span>	

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;SQUARE path using SET_POSITION_TARGET_LOCAL_NED and position parameters&quot;</span><span class="p">)</span>
<span class="n">DURATION</span> <span class="o">=</span> <span class="mi">20</span> <span class="c1">#Set duration for each segment.</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;North 50m, East 0m, 10m altitude for </span><span class="si">%s</span><span class="s2"> seconds&quot;</span> <span class="o">%</span> <span class="n">DURATION</span><span class="p">)</span>
<span class="n">goto_position_target_local_ned</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Point ROI at current location (home position)&quot;</span><span class="p">)</span> 
<span class="c1"># NOTE that this has to be called after the goto command as first &quot;move&quot; command of a particular type</span>
<span class="c1"># &quot;resets&quot; ROI/YAW commands</span>
<span class="n">set_roi</span><span class="p">(</span><span class="n">vehicle</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">global_relative_frame</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">DURATION</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;North 50m, East 50m, 10m altitude&quot;</span><span class="p">)</span>
<span class="n">goto_position_target_local_ned</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">DURATION</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Point ROI at current location&quot;</span><span class="p">)</span>
<span class="n">set_roi</span><span class="p">(</span><span class="n">vehicle</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">global_relative_frame</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;North 0m, East 50m, 10m altitude&quot;</span><span class="p">)</span>
<span class="n">goto_position_target_local_ned</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">50</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">DURATION</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;North 0m, East 0m, 10m altitude&quot;</span><span class="p">)</span>
<span class="n">goto_position_target_local_ned</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">DURATION</span><span class="p">)</span>



<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Fly the vehicle in a SQUARE path using velocity vectors (the underlying code calls the </span>
<span class="sd">SET_POSITION_TARGET_LOCAL_NED command with the velocity parameters enabled).</span>

<span class="sd">The thread sleeps for a time (DURATION) which defines the distance that will be travelled.</span>

<span class="sd">The code also sets the yaw (MAV_CMD_CONDITION_YAW) using the `set_yaw()` method in each segment</span>
<span class="sd">so that the front of the vehicle points in the direction of travel</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="c1">#Set up velocity vector to map to each direction.</span>
<span class="c1"># vx &gt; 0 =&gt; fly North</span>
<span class="c1"># vx &lt; 0 =&gt; fly South</span>
<span class="n">NORTH</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">SOUTH</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span>

<span class="c1"># Note for vy:</span>
<span class="c1"># vy &gt; 0 =&gt; fly East</span>
<span class="c1"># vy &lt; 0 =&gt; fly West</span>
<span class="n">EAST</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">WEST</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2</span>

<span class="c1"># Note for vz: </span>
<span class="c1"># vz &lt; 0 =&gt; ascend</span>
<span class="c1"># vz &gt; 0 =&gt; descend</span>
<span class="n">UP</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span>
<span class="n">DOWN</span> <span class="o">=</span> <span class="mf">0.5</span>


<span class="c1"># Square path using velocity</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;SQUARE path using SET_POSITION_TARGET_LOCAL_NED and velocity parameters&quot;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Yaw 180 absolute (South)&quot;</span><span class="p">)</span>
<span class="n">condition_yaw</span><span class="p">(</span><span class="mi">180</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Velocity South &amp; up&quot;</span><span class="p">)</span>
<span class="n">send_ned_velocity</span><span class="p">(</span><span class="n">SOUTH</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">UP</span><span class="p">,</span><span class="n">DURATION</span><span class="p">)</span>
<span class="n">send_ned_velocity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>


<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Yaw 270 absolute (West)&quot;</span><span class="p">)</span>
<span class="n">condition_yaw</span><span class="p">(</span><span class="mi">270</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Velocity West &amp; down&quot;</span><span class="p">)</span>
<span class="n">send_ned_velocity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">WEST</span><span class="p">,</span><span class="n">DOWN</span><span class="p">,</span><span class="n">DURATION</span><span class="p">)</span>
<span class="n">send_ned_velocity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>


<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Yaw 0 absolute (North)&quot;</span><span class="p">)</span>
<span class="n">condition_yaw</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Velocity North&quot;</span><span class="p">)</span>
<span class="n">send_ned_velocity</span><span class="p">(</span><span class="n">NORTH</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">DURATION</span><span class="p">)</span>
<span class="n">send_ned_velocity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>


<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Yaw 90 absolute (East)&quot;</span><span class="p">)</span>
<span class="n">condition_yaw</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Velocity East&quot;</span><span class="p">)</span>
<span class="n">send_ned_velocity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">EAST</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">DURATION</span><span class="p">)</span>
<span class="n">send_ned_velocity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Fly the vehicle in a DIAMOND path using velocity vectors (the underlying code calls the </span>
<span class="sd">SET_POSITION_TARGET_GLOBAL_INT command with the velocity parameters enabled).</span>

<span class="sd">The thread sleeps for a time (DURATION) which defines the distance that will be travelled.</span>

<span class="sd">The code sets the yaw (MAV_CMD_CONDITION_YAW) using the `set_yaw()` method using relative headings</span>
<span class="sd">so that the front of the vehicle points in the direction of travel.</span>

<span class="sd">At the end of the second segment the code sets a new home location to the current point.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;DIAMOND path using SET_POSITION_TARGET_GLOBAL_INT and velocity parameters&quot;</span><span class="p">)</span>
<span class="c1"># vx, vy are parallel to North and East (independent of the vehicle orientation)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Yaw 225 absolute&quot;</span><span class="p">)</span>
<span class="n">condition_yaw</span><span class="p">(</span><span class="mi">225</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Velocity South, West and Up&quot;</span><span class="p">)</span>
<span class="n">send_global_velocity</span><span class="p">(</span><span class="n">SOUTH</span><span class="p">,</span><span class="n">WEST</span><span class="p">,</span><span class="n">UP</span><span class="p">,</span><span class="n">DURATION</span><span class="p">)</span>
<span class="n">send_global_velocity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>


<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Yaw 90 relative (to previous yaw heading)&quot;</span><span class="p">)</span>
<span class="n">condition_yaw</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span><span class="n">relative</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Velocity North, West and Down&quot;</span><span class="p">)</span>
<span class="n">send_global_velocity</span><span class="p">(</span><span class="n">NORTH</span><span class="p">,</span><span class="n">WEST</span><span class="p">,</span><span class="n">DOWN</span><span class="p">,</span><span class="n">DURATION</span><span class="p">)</span>
<span class="n">send_global_velocity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Set new home location to current location&quot;</span><span class="p">)</span>
<span class="n">vehicle</span><span class="o">.</span><span class="n">home_location</span><span class="o">=</span><span class="n">vehicle</span><span class="o">.</span><span class="n">location</span><span class="o">.</span><span class="n">global_frame</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Get new home location&quot;</span><span class="p">)</span>
<span class="c1">#This reloads the home location in DroneKit and GCSs</span>
<span class="n">cmds</span> <span class="o">=</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">commands</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">download</span><span class="p">()</span>
<span class="n">cmds</span><span class="o">.</span><span class="n">wait_ready</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot; Home Location: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">vehicle</span><span class="o">.</span><span class="n">home_location</span><span class="p">)</span>


<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Yaw 90 relative (to previous yaw heading)&quot;</span><span class="p">)</span>
<span class="n">condition_yaw</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span><span class="n">relative</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Velocity North and East&quot;</span><span class="p">)</span>
<span class="n">send_global_velocity</span><span class="p">(</span><span class="n">NORTH</span><span class="p">,</span><span class="n">EAST</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">DURATION</span><span class="p">)</span>
<span class="n">send_global_velocity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>


<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Yaw 90 relative (to previous yaw heading)&quot;</span><span class="p">)</span>
<span class="n">condition_yaw</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span><span class="n">relative</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Velocity South and East&quot;</span><span class="p">)</span>
<span class="n">send_global_velocity</span><span class="p">(</span><span class="n">SOUTH</span><span class="p">,</span><span class="n">EAST</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">DURATION</span><span class="p">)</span>
<span class="n">send_global_velocity</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">The example is completing. LAND at current location.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Setting LAND mode...&quot;</span><span class="p">)</span>
<span class="n">vehicle</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">VehicleMode</span><span class="p">(</span><span class="s2">&quot;LAND&quot;</span><span class="p">)</span>


<span class="c1">#Close vehicle object before exiting script</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Close vehicle object&quot;</span><span class="p">)</span>
<span class="n">vehicle</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Shut down simulator if it was started.</span>
<span class="k">if</span> <span class="n">sitl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">sitl</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Completed&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


					<footer id="footer">
						
	<div class="footer-buttons" role="navigation" aria-label="footer navigation">
		
			<a href="mission_basic.html" class="btn btn-default pull-right" title="Example: Basic Mission">
				Next <span class="fa fa-arrow-circle-right"></span>
			</a>
		
		
			<a href="simple_goto.html" class="btn btn-default" title="Example: Simple Go To (Copter)">
				<span class="fa fa-arrow-circle-left"></span> Previous
			</a>
		
	</div>


<hr/>

<div role="contentinfo">
	<p>
				&copy; Copyright 2015-2016, 3D Robotics.
	</p>
</div>
Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/3drobotics/sphinx_3dr_theme">theme</a> provided by <a href="https://3drobotics.com/">3D Robotics</a> for <a href="http://dronekit.io/">DroneKit</a>.
					</footer>
				</div>
			</div>
		</div>
	</div>

	
		<script type="text/javascript" src="../_static/js/jquery.js"></script>
		<script type="text/javascript" src="../_static/js/scroll.js"></script>
		<script type="text/javascript" src="../_static/underscore.js"></script>
		<script type="text/javascript" src="../_static/doctools.js"></script>
		<script type="text/javascript" src="../_static/js/bootstrap.js"></script>
		<script type="text/javascript" src="../_static/js/cool-select.js"></script>
		<script type="text/javascript" src="../_static/searchtools.js"></script>
	
	<script type="text/javascript">
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','../../../../www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-39974306-3', 'auto');
		ga('send', 'pageview');
	</script>
</body>

<!-- Mirrored from dronekit-python.readthedocs.io/en/latest/examples/guided-set-speed-yaw-demo.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 06 Aug 2019 14:26:42 GMT -->
</html>